---
export const prerender = true;

import { getCollection, render } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const allTips = await getCollection('tipsyguias');
  
  return allTips.map((post) => ({
    params: { id: post.id },
    props: { post },
  }));
}

// Ya no buscamos por ID, recibimos el post directamente de getStaticPaths
const { post } = Astro.props;

if (!post) {
  return Astro.redirect('/404');
}

const { Content } = await render(post);

const options: Intl.DateTimeFormatOptions = {
  weekday: "long",
  year: "numeric",
  month: "long",
  day: "numeric",
};
---

<Layout title={post.data.title} description={post.data.description ?? ''}>
  <div class="post-tips-guias | mt-space-3xl prose flow text-neutral-50 m-space-auto">
      <a href="/tipsyguias" class="d-block mb-space-l text-accent-400 no-underline hover:underline"> ← Volver a Guías</a>
      
      <time datetime={post.data.date?.toISOString()} class="text-neutral-400 text-size--1">
        {post.data.date?.toLocaleDateString('es-ES', options)}
      </time>

    <h1 class="text-neutral-50 mt-space-s">{post.data.title}</h1>
    
    <div class="content-body text-neutral-200">
        <Content />
    </div>
  </div>
</Layout>