---
// components/HeatingPromoCard.astro
// Componente promocional para artículo de calefactores
// Mejorado con variables CSS personalizadas y mejor UX

import { Flame, AlertTriangle, TrendingDown, Zap, CheckCircle2, ArrowRight } from '@lucide/astro';

interface Props {
  variant?: 'urgency' | 'curiosity' | 'savings';
}

const { variant = 'urgency' } = Astro.props;

const content = {
  urgency: {
    Icon: AlertTriangle,
    iconBg: 'icon-bg--red',
    accentColor: 'var(--red-500)',
    title: '¿Miedo a encender la estufa?',
    description: 'Hemos calculado cuánto gasta cada modelo de calefactor y seleccionado los 3 más eficientes de 2026 para que no pagues de más.',
    cta: 'Ver Comparativa y Ahorrar'
  },
  curiosity: {
    Icon: Flame,
    iconBg: 'icon-bg--orange',
    accentColor: 'var(--orange-500)',
    title: '¿Tu radiador es un "vampiro" de luz?',
    description: 'Comprueba aquí su consumo real en euros. Te mostramos 5 alternativas que calientan igual gastando hasta 30€ menos al mes.',
    cta: 'Analizar mi Calefacción'
  },
  savings: {
    Icon: TrendingDown,
    iconBg: 'icon-bg--green',
    accentColor: 'var(--esmerald-green)',
    title: 'Ahorra hasta 30€/mes en calefacción',
    description: 'Análisis real de consumo de los 5 calefactores más vendidos. Descubre cuál consume menos y calienta mejor según tu tipo de vivienda.',
    cta: 'Ver Análisis Completo'
  }
};

const selected = content[variant];
const IconComponent = selected.Icon;
---

<article class="heating-promo-card mt-space-l" data-variant={variant}>
  <div class="card-content">
    <!-- Header con icono y badge -->
    <header class="card-header">
      <div class={`icon-wrapper ${selected.iconBg}`}>
        <IconComponent size={22} />
      </div>
      <span class="badge">Invierno 2026</span>
    </header>
    
    <!-- Contenido principal -->
    <h3 class="card-title">{selected.title}</h3>
    <p class="card-description">{selected.description}</p>
    
    <!-- Features - disposición horizontal en desktop -->
    <ul class="card-features" role="list">
      <li class="feature">
        <CheckCircle2 size={16} class="feature-icon" />
        <span>Consumo real en €/mes</span>
      </li>
      <li class="feature">
        <CheckCircle2 size={16} class="feature-icon" />
        <span>Análisis de 5 modelos top</span>
      </li>
      <li class="feature">
        <CheckCircle2 size={16} class="feature-icon" />
        <span>Ahorra hasta 30€/mes</span>
      </li>
    </ul>

    <!-- CTA Button -->
    <a href="/tipsyguias/mejores-calefactores-bajo-consumo-2026" class="cta-button">
      <Zap size={18} class="cta-icon" />
      <span>{selected.cta}</span>
      <ArrowRight size={18} class="cta-arrow" />
    </a>
  </div>

  <!-- Decoración de fondo -->
  <div class="card-glow" aria-hidden="true"></div>
</article>

<style define:vars={{ accentColor: selected.accentColor }}>
  .heating-promo-card {
    position: relative;
    background: var(--primary-800);
    border-radius: var(--rounded-lg);
    padding: var(--space-m);
    overflow: hidden;
    border: 1px solid var(--primary-600);
    transition: border-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
  }

  .heating-promo-card:hover {
    border-color: var(--primary-500);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  }

  .heating-promo-card:focus-within {
    outline: 2px solid var(--accent-400);
    outline-offset: 2px;
  }

  .card-content {
    position: relative;
    z-index: 2;
  }

  /* Header */
  .card-header {
    display: flex;
    align-items: center;
    gap: var(--space-s);
    margin-bottom: var(--space-s);
  }

  .icon-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: var(--rounded-md);
    color: var(--primary-50);
  }

  .icon-bg--red {
    background: linear-gradient(135deg, var(--red-600), var(--red-700));
  }

  .icon-bg--orange {
    background: linear-gradient(135deg, var(--orange-500), var(--orange-600));
  }

  .icon-bg--green {
    background: linear-gradient(135deg, var(--esmerald-green), hsl(153, 84%, 30%));
  }

  .badge {
    display: inline-flex;
    padding: var(--space-3xs) var(--space-xs);
    background: var(--primary-700);
    border: 1px solid var(--primary-600);
    border-radius: var(--rounded-full);
    font-size: var(--size--2);
    font-weight: var(--bold);
    color: var(--primary-200);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* Contenido */
  .card-title {
    font-size: var(--size-1);
    font-weight: var(--bold);
    color: var(--primary-50);
    margin: 0 0 var(--space-2xs) 0;
    line-height: 1.3;
  }

  .card-description {
    font-size: var(--size--1);
    line-height: 1.6;
    color: var(--primary-200);
    margin: 0 0 var(--space-s) 0;
  }

  /* Features */
  .card-features {
    display: flex;
    flex-direction: column;
    gap: var(--space-2xs);
    margin: 0 0 var(--space-m) 0;
    padding: 0;
    list-style: none;
  }

  .feature {
    display: flex;
    align-items: center;
    gap: var(--space-2xs);
    font-size: var(--size--1);
    color: var(--primary-200);
  }

  .feature-icon {
    color: var(--esmerald-green);
    flex-shrink: 0;
  }

  /* CTA Button */
  .cta-button {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2xs);
    background: var(--primary-600);
    color: var(--primary-50);
    padding: var(--space-xs) var(--space-m);
    border-radius: var(--rounded-md);
    font-size: var(--size--1);
    font-weight: var(--bold);
    text-decoration: none;
    transition: all 0.3s ease;
    border: 1px solid var(--primary-500);
  }

  .cta-button:hover {
    background: var(--primary-500);
    border-color: var(--primary-400);
    transform: translateX(4px);
  }

  .cta-button:focus {
    outline: 2px solid var(--accent-400);
    outline-offset: 2px;
  }

  .cta-icon {
    color: var(--amber);
  }

  .cta-arrow {
    transition: transform 0.3s ease;
  }

  .cta-button:hover .cta-arrow {
    transform: translateX(4px);
  }

  /* Decoración de fondo */
  .card-glow {
    position: absolute;
    top: -50%;
    right: -20%;
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, var(--accentColor) 0%, transparent 70%);
    opacity: 0.06;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  .heating-promo-card:hover .card-glow {
    opacity: 0.1;
  }

  /* Responsive */
  @media (min-width: 640px) {
    .heating-promo-card {
      padding: var(--space-l);
    }

    .card-features {
      flex-direction: row;
      flex-wrap: wrap;
      gap: var(--space-xs) var(--space-m);
    }
  }

  @media (max-width: 639px) {
    .heating-promo-card {
      padding: var(--space-s);
    }

    .card-title {
      font-size: var(--size-0);
    }

    .card-description {
      font-size: var(--size--2);
    }

    .cta-button {
      width: 100%;
      justify-content: center;
      padding: var(--space-s) var(--space-m);
    }
  }

  /* Variantes de color según el tipo */
  [data-variant="urgency"] .card-title {
    color: var(--red-100);
  }

  [data-variant="curiosity"] .card-title {
    color: var(--orange-100);
  }

  [data-variant="savings"] .card-title {
    color: hsl(153, 60%, 85%);
  }
</style>